<div class="col-md-12  modal-demo">
    <a type="button" class="rds-btn buy-btn" ng-click="vm.openAddBackupModal()">
        <span class="btn-icon new-user"></span> 创建备份
    </a>
    <a class="search-label">
        <span class="btn-icon new-search"></span> 全局搜索
    </a>
    <input class="search-input" type="text" ng-model="vm.filter" />
    <div style="height: 8px"></div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
            <tr>
                <th></th>
                <th>名称</th>
                <th>状态</th>
                <th>创建时间</th>
                <th>完成时间</th>
                <th>增量</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <!--
        <pre>{{vm.db.databases}}</pre>
-->
            <tr ng-repeat="backup in vm.backupList.backups|filter:vm.filter">
                <td><input type="radio"></td>
                <td><a ui-sref="cluster.backup.detail({backupId:backup.id})">{{backup.name}}</a></td>
                <td>{{backup.status}}</td>
                <td>{{backup.created.replace("T"," ")}}</td>
                <td>{{backup.updated.replace("T"," ")}}</td>
                <td>{{backup.parent_id != null?'是':'否'}}</td>
                <td>
                    <a type="button" class="rds-sm-btn normal-btn" id="deleteDb" ng-click="vm.openDeleteDBModal()">
                        <span class="btn-icon new-delete"></span> 删除
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!--创建备份弹窗-->
<script type="text/ng-template" id="addBackupModal.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="vm.cancel()">&times;</button>
        <h3 class="modal-title" id="addBackupModal-title">创建备份</h3>
    </div>
    <div class="modal-body" id="addBackupModal-body">
        <form class="form-horizontal user_form" role="form" id="backup_form" name="backup_form" novalidate="">
            <div class="form-group">
                <label class="col-sm-3 control-label">备份名称</label>
                <div class="col-sm-9">
                    <input type="text" required="" ng-pattern="/^[A-Za-z]{1}[0-9A-Za-z_]{2,16}$/" name="backup_name" ng-model="vm.backup_add.name" class="form-control" placeholder="由字母、数字、下划线组成，以字母开头，3-16个字符">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">父备份</label>
                <div class="col-sm-9">
                    <select ng-model="selectValue" ng-change="selectedChange(selectedValue)">
                        <option value="">-- 请选择备份 --</option>
                        <option ng-repeat="backup in vm.activeBackupList" value="{{backup.id}}">{{backup.name}}</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
            <label class="col-sm-3 control-label">存储时长</label>
                <div class="col-sm-9">
                    <input type="text" required="" ng-pattern="/^([7-9]|[1-9]\d{1,2}|10[0-8]\d|109[0-5])$/" ng-model="vm.backup_add.timePeriod" class="form-control" placeholder="存储天数必须在7-1095之间">
                </div>
            </div>
            <div class="form-group">
            <label class="col-sm-3 control-label">描述</label>
                <div class="col-sm-9">
                    <textarea ng-model="vm.backup_add.desc" placeholder="请输入备份描述信息"  ng-blur="blur()"></textarea>
                </div>
            </div>
        </form>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="vm.cancel()">关闭</button>
        <button type="button" class="btn btn-primary" ng-disabled="backup_form.$invalid" ng-click="vm.addBackupOk()">创建</button>
    </div>
</script>